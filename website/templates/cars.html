<!doctype html>
  <head>
    <meta charset="utf-8">
    <title>Interactive cost-carbon space of 2014 light-duty vehicles in the U.S. market</title>
    <meta name="description" content="Interactive cost-carbon curve (alpha)">
    <link rel="stylesheet" href="{{ url_for('static', filename='cars/css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='cars/css/svg.css') }}">
  </head>
  {% raw %}
  <body ng-app="interactiveCostCarbonApp" ng-cloak>

      <div id="app" ng-controller="mainCtrl">

        <div id="headerbar">
            <div id="headerbar-innerwrapper">
                <div id="headerbar-logo">
                    <span id="logo-title">GreenCarMap</span>
                </div>

                <div id="headerbar-startmenu" ng-repeat="settingGroup in settings | filter: { showIf: 'control' }">

                    <span ng-repeat="setting in settingGroup.settings">
                        <select ng-if="setting.isSelect" ng-model="setting.value" ng-options="option.key as option.title group by option.group for option in setting.options"></select>
                    </span>

                </div>

<!--                 <div id="headerbar-startmenu">
                    <a href="#" id="headerbar-tutorial">Tutorial</a>
                    <select id="headerbar-controlmode" ng-model="uiOptions.controlMode.value" ng-options="option.key as option.title for option in uiOptions.controlMode.options">
                    </select>
                </div> -->


                <!-- Todo: look at ng active or something (error class, active class?) -->
                <div id="headerbar-menu">
                    <a ng-class="tab == 'legend' ? 'active' : ''" ng-click="changeTab('legend')">Legend</a>
                    <a ng-class="tab == 'settings' ? 'active' : ''" ng-click="changeTab('settings')">Conditions</a>
                    <a ng-class="tab == 'display' ? 'active' : ''" ng-click="changeTab('display')">Plot config</a>
                    <a ng-class="tab == 'about' ? 'active' : ''" ng-click="changeTab('about')">About</a>
                </div>
            </div>
        </div>

        <aside id="interface-bar">

            <div class="group" ng-show="tab == 'legend'" style="padding-bottom: 5px;">

                <h1>Search for a Car</h1>

                <input ng-model="search" type="text" style="margin-bottom: 5px; width: 150px;">
                <span id="clear-search" ng-show="showList()" ng-click="clearSearch()">X</span>

                <div ng-show="showList()">
                    <p class="quicksetting-paragraph" ng-repeat="item in vehicleList | filter:search" ng-click="highlight(item.id)">{{item.name}}</p>
                </div>

            </div>

            <div class="group" ng-show="uiInfo.highlightedCars.length" style="padding-bottom: 5px;">

                <h1>Highlighted Cars</h1>

                <p class="highlighted-car-entry" ng-repeat="car in uiInfo.highlightedCars" ng-mouseover="highlightDot(car.id)" ng-mouseleave="dehighlightDot(car.id)">
                    <span class="highlighted-dot">{{car.index}}</span> {{car.make}} {{car.model}} {{car.suffix}} {{car.trim}} ({{car.powertrain}})
                    <span class="highlighted-clear" ng-click="highlight(car.id)">X</span>
                </p>

            </div>

            <div class="group" ng-show="uiInfo.legend.length && tab == 'legend'" style="padding-bottom: 5px;">

                <h1>Legend</h1>

                <p ng-repeat="legendEntry in uiInfo.legend" class="legend-entry" ng-mouseover="highlightHull(legendEntry.id)" ng-mouseleave="dehighlightHull(legendEntry.id)">
                    <span class="legend-dot" style="background-color: {{legendEntry.color}};"></span> {{legendEntry.text}}
                </p>

            </div>

            <div class="group" ng-show="quickSettings && tab == 'settings'" style="padding-bottom: 5px;">

                <h1>Quick Apply</h1>

                <p class="quicksetting-paragraph" ng-repeat="quickSetting in quickSettings" ng-click="applyQuickSettings(quickSetting.key)"> {{quickSetting.title}} </p>

            </div>

            <div class="group" ng-repeat="settingGroup in settings | filter: { showIf: tab }">

                <h1>{{settingGroup.title}}</h1>

                <div class="interface-group" ng-repeat="setting in settingGroup.settings">
                    <span class="config-title">{{setting.title}} <span ng-if="setting.isSlider" class="config-unit">{{setting.unit}}</span></span>
                    <span class="additional-info-wrapper" ng-if="setting.help">
                        <span class="additional-info-inner-wrapper">
                            <span class="additional-info-icon">?</span>
                            <span class="additional-info-text">{{setting.help}}</span>
                        </span>
                    </span>
                    <select ng-if="setting.isSelect" ng-model="setting.value" ng-options="option.key as option.title group by option.group for option in setting.options"></select>
                    <input ng-if="setting.isSlider" type="text" ng-model="setting.value" size="4"></input>
                    <div ng-if="setting.isSlider" class="config-slider" setting="setting"></div>
                </div>

            </div>

            <div ng-show="tab == 'settings'">

                <h1>Store &amp; Load Conditions</h1>

                <button type="button" ng-click="storeSettings()">Store</button>

                <button type="button" class="{{storageBoxes.box0.state}}" ng-click="triggerStorageBox(0)" ng-disabled="storageBoxes.box0.disabled">1</button>
                <button type="button" class="{{storageBoxes.box1.state}}" ng-click="triggerStorageBox(1)" ng-disabled="storageBoxes.box1.disabled">2</button>
                <button type="button" class="{{storageBoxes.box2.state}}" ng-click="triggerStorageBox(2)" ng-disabled="storageBoxes.box2.disabled">3</button>
                <button type="button" class="{{storageBoxes.box3.state}}" ng-click="triggerStorageBox(3)" ng-disabled="storageBoxes.box3.disabled">4</button>
                <button type="button" class="{{storageBoxes.box4.state}}" ng-click="triggerStorageBox(4)" ng-disabled="storageBoxes.box4.disabled">5</button>
                <button type="button" ng-click="clearStorage()">Clear</button>

                <p>Click 'store' and then click on one of the five storage slots. Once you have stored settings, you can click on the corresponding slot at any time to load those settings.</p>

                <!--|
                <button type="button" ng-click="downloadSettings()">Download</button>
                <button type="button" ng-click="toggleUpload()">Upload</button>

                <div ng-hide="hideUpload" id="uploadBox">
                    <input type="file" id="file" name="file">
                    <button type="button" id="uploadBoxGoButton" ng-click="uploadSettings()">Go</button>
                </div>-->
                
                <!--<h1>Save &amp; Export SVG</h1>

                <button type="button" ng-click="saveSvg('download')" ng-enabled="{{canDownload}}">Download SVG</button>
                <button type="button" ng-click="saveSvg('open')">Open SVG in new tab</button>-->

            </div>

            <div ng-show="tab == 'about'">

                <h1>Calculation of targets</h1>
                <p>Placeholder for 'about' text</p>

                <h1>Calculation of vehicle costs</h1>
                <p>Placeholder for 'about' text</p>

                <h1>Calculation of fuel costs</h1>
                <p>Placeholder for 'about' text</p>

                <h1>Calculation of maintenance costs</h1>
                <p>Placeholder for 'about' text</p>

                <h1>Calculation of vehicle cycle emissions</h1>
                <p>Placeholder for 'about' text</p>

                <h1>Calculation of fuel cycle emissions</h1>
                <p>Placeholder for 'about' text</p>

            </div>

        </aside>

        <div id="main">

            <cost-carbon-space></cost-carbon-space>

        </div>

      </div>

    <div id="copyright">
        Developed by <a href="http://marco.miotti.me" target="_blank">Marco Miotti</a> at the <a href="http://trancik.mit.edu/" target="_blank">MIT Trancik Lab</a>. Method developed by <a href="" target="_blank">Miotti, Supran, Kim, and Trancik</a>. Vehicle specifications obtained from manufacturer websites and <a href="https://www.cars.com">cars.com</a>.
    </div>

    </div>
    {% endraw %}

    <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>-->
    <script src="{{ url_for('static', filename='cars/scripts/angular.min.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/app.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/d3Service.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/customizable/calculateResults.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/customizable/getConfigOptions.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/customizable/getCsvList.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/customizable/processCsvData.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/customizable/colorsAndStyles.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/convexHullService.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/d3PlotService.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/d3SliderService.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/configService.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/services/dataService.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/controllers/mainCtrl.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/directives/costCarbonSpace.js') }}"></script>
    <script src="{{ url_for('static', filename='cars/scripts/directives/configSlider.js') }}"></script>

  </body>
</html>